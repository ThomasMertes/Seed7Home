<html>
<head>
<meta charset="utf-8" />
<title>
Seed7 Program: Dnafight</title>
<meta name="author" content="Thomas Mertes" />
<meta name="copyright" content="Thomas Mertes" />
<meta name="keywords" content="Seed7, SeedSeven, Seed, Seven, 7, programming, language, extensible, extendable" />
<meta name="description" content="Seed7 - The extensible programming language" />
<meta name="page-topic" content="programming language, computer, software, downloads" />
<meta name="audience" content="all" />
<meta name="content-language" content="en" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="../style3.css" type="text/css" />
</head>
<body style="margin:0 0 0 0;">
<div style="background-image: url('../images/header1x.png');" class="top_image">
<img style="overflow:hidden;" src="../images/hearts7m.png" height="68" width="50"
 /><img style="overflow:hidden;" src="../images/header3.png" height="68" width="745" />
</div>
<div style="background-image: url('../images/fillpix.png');" class="space_below_top_image">
</div>
<div class="menu">

<a class="head" href="../index.htm"><big>Seed7</big></a>
<a class="menu" href="../faq.htm">FAQ</a>
<a class="menu" href="../manual/index.htm">Manual</a>
<a class="menu" href="../scrshots/index.htm">Programs</a>
<a class="menu" href="../examples/index.htm">Examples</a>
<a class="menu" href="../libraries/index.htm">Libraries</a>
<a class="menu" href="../algorith/index.htm">Algorithms</a>
<a class="menu" href="../benchmks/index.htm">Benchmarks</a>
<a class="menu" href="../subject_index.htm">Index</a>
<a class="menu" href="http://sourceforge.net/project/showfiles.php?group_id=151126">Download</a>
<a class="menu" href="https://github.com/ThomasMertes/seed7">GitHub</a>
<a class="menu" href="../build.htm">Build Seed7</a>
<a class="menu" href="../links.htm">Links</a>

<br />

<a class="head" href="index.htm"><big>Programs</big></a>
<a class="menu" href="panic.htm">Panic</a>
<a class="menu" href="mandelbr.htm">Mandelbr</a>
<a class="menu" href="planets.htm">Planets</a>
<a class="menu" href="comanche.htm">Comanche</a>
<a class="menu" href="calc7.htm">Calc7</a>
<a class="menu" href="savehd7.htm">Savehd7</a>
<a class="menu" href="s7c.htm">Compiler</a>
<a class="menu" href="db7.htm">Db7</a>
<a class="menu" href="ide7.htm">Ide7</a>
<a class="menu" href="klondike.htm">Klondike</a>
<a class="menu" href="dnafight.htm">Dnafight</a>
<a class="menu" href="sudoku7.htm">Sudoku</a>
<a class="menu" href="wator.htm">Wator</a>
<a class="menu" href="tar7.htm">Tar7</a>
<a class="menu" href="sydir7.htm">Sydir7</a>
<a class="menu" href="ftp7.htm">Ftp7</a>
<a class="menu" href="castle.htm">Castle</a>
<a class="menu" href="tetg.htm">Tetris</a>
<a class="menu" href="make7.htm">Make7</a>
<a class="menu" href="ftpserv.htm">Ftpserv</a>
<a class="menu" href="bas7.htm">Basic</a>
<a class="menu" href="pairs.htm">Pairs</a>
<a class="menu" href="shisen.htm">Shisen</a>
<a class="menu" href="eliza.htm">Eliza</a>
<a class="menu" href="../algorith/graphic.htm#dragon_curve">Dragon</a>
<a class="menu" href="../images/testfont1.png">Fonts</a>
<a class="menu" href="toutf8.htm">Toutf8</a>
<a class="menu" href="lander.htm">Lander</a>
<a class="menu" href="wiz.htm">Wiz</a>
<a class="menu" href="startrek.htm">Startrek</a>
<a class="menu" href="../images/dirx1.png">Directory</a>
<a class="menu" href="../algorith/graphic.htm#bifurk">Bifurc</a>
<a class="menu" href="mahjong.htm">Mahjong</a>
<a class="menu" href="../images/rever1.png">Reversi</a>
<a class="menu" href="sokoban.htm">Sokoban</a>
<a class="menu" href="../algorith/graphic.htm#cellauto">Cellauto</a>
<a class="menu" href="sl.htm">Life</a>
<a class="menu" href="../images/snake1.png">Snake</a>
<a class="menu" href="self.htm">Self</a>
<a class="menu" href="../images/carddemo1.png">Cards</a>
<a class="menu" href="../images/ms1.png">Mines</a>
<a class="menu" href="../images/pac1.png">Pacman</a>
</div>
<div class="content">
<table width="100%" cellpadding="0" cellspacing="0">
<tr>
<td align="left" width="80">
<a class="head" href="index.htm"><big>Programs</big></a>
</td>
<td>
<table width="10">
</table>
</td>
<td align="left" width="60%">
<b><big>Dnafight</big></b></td>
<td align="right"><a class="link" href="../prg/dnafight.htm">Source&nbsp;Code</a></td>
<td>
<table width="10">
</table>
</td>
<td align="right">
<table border="0" cellspacing="1" bgcolor="blue">
<tr bgcolor="silver">
<td>&nbsp;<a class="navigation" href="../scrshots/klondike.htm">previous</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../scrshots/index.htm">up</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../scrshots/sudoku7.htm">next</a>&nbsp;</td>
</tr>
</table>
</td>
</tr>
</table>
<br />
<table cellspacing="0" border="0">
<tr valign="top">
<td align="left" width="100%">

<p>
Dnafight is a programming game in which bacteria fight against each other.
</p><p>
In Dnafight there are different types of bacteria named with colors.
Each bacterium is controlled by a DNA program written in Seed7.
The plate on which the bacteria live is a rectangular grid of cells.
A cell can be empty or contain one bacterium. A cell can also contain some food.
In every turn a bacterium can inspect its own cell and the eight neighbor cells.
Then the bacterium can decide between eating, killing or splitting in one of the four cardinal directions.
</p><ul>
<li>Eating food includes moving and is also allowed if the bacterium stays in place.</li>
<li>Killing another bacterium is allowed if the other bacterium is of the same size or smaller.</li>
<li>Splitting a bacterium produces two half-sized bacteria.
    The first stays in place while the second moves to another place.
    Both new bacteria can eat food.</li>
</ul><p>
There are two ways to play this game:
</p><ol>
<li>Place some bacteria on the plate and let them fight against each other.</li>
<li>Write a DNA program for a new bacterium and measure your programming skills.</li>
</ol><p></p>

<div><h3>Interfaces usable by a DNA program</h3>
<p>
The <span class="stri">"<a class="lib" href="../prg/dna_base.htm">dna_base.s7i</a>"</span> library contains
the interfaces for a DNA program. It contains the following definitions:
</p><p>
The enumeration type <tt><span class="type">bactColor</span></tt> identifies the color of a bacterium:
</p><dl>
<dt></dt><dd><tt>EDGE</tt> (edge of the plate),</dd>
<dt></dt><dd><tt>CLEAR</tt> (empty field),</dd>
<dt></dt><dd><tt>WHITE</tt>, <tt>VIOLET</tt>, <tt>INDIGO</tt>, <tt>BLUE</tt>,
<tt>CYAN</tt>, <tt>GREEN</tt>, <tt>YELLOW</tt>, <tt>AMBER</tt>, <tt>ORANGE</tt>, <tt>RED</tt>,
<tt>SCARLET</tt>, <tt>TAN</tt>, <tt>LILIAC</tt>, <tt>PINK</tt></dd>
</dl><p>
The enumeration type <tt><span class="type">direction</span></tt> identifies the neighbor cells of a bacterium:
</p><dl>
<dt></dt><dd><tt>HERE</tt>, <tt>NORTH</tt>, <tt>SOUTH</tt>, <tt>WEST</tt>, <tt>EAST</tt>, <tt>NW</tt>, <tt>NE</tt>, <tt>SW</tt>, <tt>SE</tt>.</dd>
</dl><p>
The following functions can be used to read properties of cells:
</p><ul>
<li><b>view</b>(<span class="type">direction</span>) returns the content
    (<tt><span class="type">bactColor</span></tt>) of a cell.</li>
<li><b>strength</b>(<span class="type">direction</span>) returns the strength/size of
    a bacterium or 0 for <tt>'CLEAR'</tt> and <tt>'EDGE'</tt> fields.</li>
<li><b>food</b>(<span class="type">direction</span>) returns the amount of food
    at a field or 0 for <tt>'EDGE'</tt> fields.</li>
</ul><p>
The color of a bacterium can be computed with <tt>view(HERE)</tt> and
it's size can be computed with <tt>strength(HERE)</tt>.
The following functions can be used to determine the action of a bacterium:
</p><ul>
<li><b>eat</b>(<span class="type">direction</span>, <a class="type" href="../manual/types.htm#integer">integer</a>) moves a bacterium and it eats
    the given quantity of food.
    If the direction is not <tt>'HERE'</tt> the destination field must be <tt>'CLEAR'</tt>.</li>
<li><b>kill</b>(<span class="type">direction</span>) moves a bacterium and it kills/eats another
    bacterium at the new position.
    The other bacterium must be of the same size or smaller.</li>
<li><b>split</b>(<span class="type">direction</span>, <a class="type" href="../manual/types.htm#integer">integer</a>, <a class="type" href="../manual/types.htm#integer">integer</a>)
    splits a bacterium in two (one moves in the given direction).
    The two bacteria eat the given amounts of food.
    The direction must not be <tt>'HERE'</tt> and the destination field must be <tt>'CLEAR'</tt>.</li>
</ul><p>
Eating, killing and splitting in a diagonal direction (<tt>NW</tt>, <tt>NE</tt>, <tt>SW</tt>, <tt>SE</tt>)
is not allowed.
A bacterium can use <tt>eat(HERE, 0)</tt> to wait and <tt>kill(HERE)</tt> to commit suicide.
In every move a bacterium shrinks by a certain percentage (to simulate the metabolism).
</p><ul>
<li><b>shrinkSize</b>(<a class="type" href="../manual/types.htm#integer">integer</a>) computes the size by which a bacterium with the given size would shrink (if the bacterium does nothing).</li>
</ul><p>
The food ingested or the size of a killed bacterium
(which also counts as food) are added to the size of the bacterium.
If the size of a bacterium reaches 0 it dies due to hunger.
If a bacterium shrinks although it ingests food
(there is not enough food to keep the current size) it still has hunger.
After being hungry for more than 3 successive moves a bacterium dies also due to hunger.
</p><ul>
<li><b>hunger</b> computes how many moves a bacterium survives in a hunger situation.</li>
</ul><p>
There are some constants defining the basic conditions at the start of the simulation:
</p><ul>
<li><b>initSize</b> defines the initial size of the bacteria.</li>
<li><b>foodReserve</b> is the initial amount of food at all fields (except <tt>'EDGE'</tt>).</li>
<li><b>shrinkage</b> is the percentage by which bacteria shrink in every move.</li>
</ul><p>
With these interfaces a DNA program can be written.
Additionally there are some convenience definitions to make the
job of writing a DNA program easier.
</p><ul>
<li>The constant <tt>'ALL'</tt> can be used with <tt>'eat'</tt> and <tt>'split'</tt>
    to determine that all food from the given field should be ingested.
<li>The type <tt><span class="type">colorSet</span></tt> is defined as
    <tt><a class="type" href="../manual/types.htm#set">set</a><span class="type"> of bactColor</span></tt>.</li>
<li>The constant <tt>'ALL_COLORS'</tt> defines a set of all bacterium colors.
<li>The type <tt><span class="type">directSet</span></tt> is defined as
    <tt><a class="type" href="../manual/types.htm#set">set</a><span class="type"> of direction</span></tt>.</li>
<li>The constant <tt>'MAIN_DIRECTIONS'</tt> defines a set of the directions
    <tt>NORTH</tt>, <tt>SOUTH</tt>, <tt>WEST</tt> and <tt>EAST</tt>.</li>
<li>The constant <tt>'DIAGONAL_DIRECTIONS'</tt> defines a set of the directions
    <tt>NW</tt>, <tt>NE</tt>, <tt>SW</tt> and <tt>SE</tt>.</li>
<li>The arrays <tt>'left'</tt> and <tt>'right'</tt> can be used to
    get a neighboring direction. E.g.: <tt>left[NORTH]</tt> is <tt>NW</tt>,
    <tt>right[SE]</tt> is <tt>SOUTH</tt>, <tt>left[HERE]</tt> is <tt>HERE</tt>.</li>
<li><b>nextSize</b>(<a class="type" href="../manual/types.htm#integer">integer</a>, <a class="type" href="../manual/types.htm#integer">integer</a>,
    <a class="type" href="../manual/types.htm#integer">integer</a>)
    Computes the new size of a bacterium. As input it has
    the current size, the food it plans to ingest and the current hunger.</li>
<li><b>min</b>(<a class="type" href="../manual/types.htm#integer">integer</a>, <a class="type" href="../manual/types.htm#integer">integer</a>)</b>
    returns the minimum of the two integers.
<li><b>max</b>(<a class="type" href="../manual/types.htm#integer">integer</a>, <a class="type" href="../manual/types.htm#integer">integer</a>)</b>
    returns the maximum of the two integers.
<li><b>ranDir</b>(<span class="type">directSet</span>) returns a random direction
    from the given directSet. If the directSet is empty it returns <tt>HERE</tt>.</li>
</ul><p>
</p></div>
</td>
<td>
<table width="10">
</table>
</td>
<td>
<table cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr valign="top" align="center">
<td><a href="../images/dnafight1.png"><img src="../images/dnafight1m.png" border="0" /></a><br />Dnafight</td></tr>
<tr height="20"><td></td></tr>
<tr valign="top" align="center">
<td><a href="../images/dnafight2.png"><img src="../images/dnafight2m.png" border="0" /></a><br />Dnafight</td></tr>
<tr height="20"><td></td></tr>
</tbody>
</table>
</td>
</tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
<tr>
<td><img src="../images/dnafight.png" border="0" /></td>
<td>
<table width="10">
</table>
</td>
<td align="left" width="60%">
<b><big><hr \></big></b></td>
<td align="right">
<table border="0" cellspacing="1" bgcolor="blue">
<tr bgcolor="silver">
<td>&nbsp;<a class="navigation" href="../scrshots/klondike.htm">previous</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../scrshots/index.htm">up</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../scrshots/sudoku7.htm">next</a>&nbsp;</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
  </body>
</html>
