<html>
<head>
<meta charset="utf-8" />
<title>
Seed7 Example: Generic map function</title>
<meta name="author" content="Thomas Mertes" />
<meta name="copyright" content="Thomas Mertes" />
<meta name="keywords" content="Seed7, SeedSeven, Seed, Seven, 7, programming, language, extensible, extendable" />
<meta name="description" content="Seed7 - The extensible programming language" />
<meta name="page-topic" content="programming language, computer, software, downloads" />
<meta name="audience" content="all" />
<meta name="content-language" content="en" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="../style1.css" type="text/css" />
</head>
<body style="margin:0 0 0 0;">
<div style="background-image: url('../images/header1x.png');" class="top_image">
<img style="overflow:hidden;" src="../images/hearts7m.png" height="68" width="50"
 /><img style="overflow:hidden;" src="../images/header3.png" height="68" width="745" />
</div>
<div style="background-image: url('../images/fillpix.png');" class="space_below_top_image">
</div>
<div class="menu">

<a class="head" href="../index.htm"><big>Seed7</big></a>
<a class="menu" href="../faq.htm">FAQ</a>
<a class="menu" href="../manual/index.htm">Manual</a>
<a class="menu" href="../scrshots/index.htm">Programs</a>
<a class="menu" href="../examples/index.htm">Examples</a>
<a class="menu" href="../libraries/index.htm">Libraries</a>
<a class="menu" href="../algorith/index.htm">Algorithms</a>
<a class="menu" href="../benchmks/index.htm">Benchmarks</a>
<a class="menu" href="../subject_index.htm">Index</a>
<a class="menu" href="http://sourceforge.net/project/showfiles.php?group_id=151126">Download</a>
<a class="menu" href="https://github.com/ThomasMertes/seed7">GitHub</a>
<a class="menu" href="../build.htm">Build Seed7</a>
<a class="menu" href="../links.htm">Links</a>

<br />

<a class="head" href="index.htm"><big>Examples</big></a>
<a class="menu" href="echo.htm">echo&nbsp;args</a>
<a class="menu" href="strifile.htm">file&nbsp;in&nbsp;string</a>
<a class="menu" href="txtclock.htm">simple&nbsp;clock</a>
<a class="menu" href="wordcnt.htm">count&nbsp;words</a>
<a class="menu" href="subtype.htm">subtype</a>
<a class="menu" href="map.htm">map&nbsp;function</a>
<a class="menu" href="generic.htm">generic&nbsp;func</a>
<a class="menu" href="declstat.htm">declare&nbsp;stmt</a>
<a class="menu" href="for_decl.htm">template</a>
<a class="menu" href="operator.htm">operator</a>
<a class="menu" href="3wayif.htm">3-way&nbsp;if</a>
</div>
<div class="content">
<div style="padding-right:20;">
<table width="100%" cellpadding="0" cellspacing="0">
<tr>
<td align="left" width="80">
<a class="head" href="index.htm"><big>Examples</big></a>
</td>
<td>
<table width="10">
</table>
</td>
<td align="left" width="60%">
<b><big>Generic map function</big></b></td>
<td align="right">
<table border="0" cellspacing="1" bgcolor="blue">
<tr bgcolor="silver">
<td>&nbsp;<a class="navigation" href="../examples/map.htm">previous</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../examples/index.htm">up</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../examples/declstat.htm">next</a>&nbsp;</td>
</tr>
</table>
</td>
</tr>
</table>
<p>
A <a class="link" href="map.htm">normal map function</a> is defined for a specific array element type.
To use a map function for arbitary types it must be defined with a <a class="link" href="../faq.htm#generics">template</a>.
A template can define the map function for a given array element type.
For this purpose <tt>'GENERIC_MAP_FUNCTION'</tt> uses the <tt><a class="type" href="../manual/types.htm#type">type</a></tt> parameter <tt>'elementType'</tt>:
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#proc">proc</a>: GENERIC_MAP_FUNCTION (<span class="keywd">in</span> <a class="type" href="../manual/types.htm#type">type</a>: elementType) <span class="keywd">is func</span>
  <span class="keywd">local</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#type">type</a>: arrayType <span class="keywd">is</span> <a class="type" href="../manual/types.htm#void">void</a>;
  <span class="keywd">begin</span>
    arrayType := <a class="type" href="../manual/types.htm#array">array</a> <span class="type">elementType</span>;

    <span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <span class="type">arrayType</span>: doMap (<span class="keywd">in</span> <span class="type">arrayType</span>: anArray,
        <span class="keywd">inout</span> <span class="type">elementType</span>: aVariable, <span class="keywd">ref</span> <a class="type" href="../manual/types.htm#func">func</a> <span class="type">elementType</span>: anExpression) <span class="keywd">is func</span>

      <span class="keywd">result</span>
        <span class="keywd">var</span> <span class="type">arrayType</span>: mappedArray <span class="keywd">is</span> 0 <a class="op" href="../libraries/array.htm#(in_integer)times(in_baseType)">times</a> <span class="type">elementType</span>.value;
      <span class="keywd">begin</span>
        <span class="keywd">for</span> aVariable <span class="keywd">range</span> anArray <span class="keywd">do</span>
          mappedArray &:= anExpression;
        <span class="keywd">end for</span>;
      <span class="keywd">end func</span>;

  <span class="keywd">end func</span>;
</pre><p>
The body of <tt>'GENERIC_MAP_FUNCTION'</tt> contains a definition of <tt>'doMap'</tt>.
Seed7 templates must be instanciated explizit. E.g.:
</p><pre class="indent">
GENERIC_MAP_FUNCTION(<a class="type" href="../manual/types.htm#float">float</a>);
GENERIC_MAP_FUNCTION(<a class="type" href="../manual/types.htm#string">string</a>);
GENERIC_MAP_FUNCTION(<a class="type" href="../manual/types.htm#time">time</a>);
</pre><p>
Assume that <tt>'word'</tt> is a <tt><a class="type" href="../manual/types.htm#string">string</a></tt> variable.
Now
</p><pre class="indent">
doMap([](<span class="stri">"apple"</span>, <span class="stri">"pear"</span>, <span class="stri">"apricot"</span>, <span class="stri">"melon"</span>), word, word <a class="op" href="../libraries/string.htm#(in_string)&amp;(in_string)">&amp;</a> <span class="stri">"s"</span>)
</pre><p>
will return
</p><pre class="indent">
[](<span class="stri">"apples"</span>, <span class="stri">"pears"</span>, <span class="stri">"apricots"</span>, <span class="stri">"melons"</span>)
</pre><p>
Other possible calls of <tt>'doMap'</tt> are:
</p><pre class="indent">
doMap([] (1.2, 2.3, 3.4), x, x <a class="op" href="../libraries/float.htm#(in_float)+(in_float)">+</a> 1.0)
doMap(thing, word,  <span class="stri">"a "</span> <a class="op" href="../libraries/string.htm#(in_string)&amp;(in_string)">&amp;</a> word)
doMap(birthdays, z, z <a class="op" href="../libraries/duration.htm#(in_time)+(in_duration)">+</a> 1 . YEARS)
</pre><p></p>
<table width="100%" cellpadding="0" cellspacing="0">
<tr>
<td align="left" width="60%">
<b><big><hr \></big></b></td>
<td align="right">
<table border="0" cellspacing="1" bgcolor="blue">
<tr bgcolor="silver">
<td>&nbsp;<a class="navigation" href="../examples/map.htm">previous</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../examples/index.htm">up</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../examples/declstat.htm">next</a>&nbsp;</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</div>
  </body>
</html>
