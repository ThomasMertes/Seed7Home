<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>
Seed7 Algorithms: Date&nbsp;&&nbsp;Time</title>
<meta name="author" content="Thomas Mertes" />
<meta name="copyright" content="Thomas Mertes" />
<meta name="keywords" content="Seed7, SeedSeven, Seed, Seven, 7, programming, language, extensible, extendable" />
<meta name="description" content="Seed7 - The extensible programming language" />
<meta name="page-topic" content="programming language, computer, software, downloads" />
<meta name="audience" content="all" />
<meta name="content-language" content="en" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="../style3.css" type="text/css" />
</head>
<body style="margin:0 0 0 0;">
<div style="background-image: url('../images/header1x.png');" class="top_image">
<img style="overflow:hidden;" src="../images/hearts7m.png" height="68" width="50"
 /><img style="overflow:hidden;" src="../images/header3.png" height="68" width="745" />
</div>
<div style="background-image: url('../images/fillpix.png');" class="space_below_top_image">
</div>
<div class="menu">

<a class="head" href="../index.htm"><big>Seed7</big></a>
<a class="menu" href="../faq.htm">FAQ</a>
<a class="menu" href="../manual/index.htm">Manual</a>
<a class="menu" href="../demo.htm">Demo</a>
<a class="menu" href="../scrshots/index.htm">Screenshots</a>
<a class="menu" href="../examples/index.htm">Examples</a>
<a class="menu" href="../libraries/index.htm">Libraries</a>
<a class="menu" href="../algorith/index.htm">Algorithms</a>
<a class="menu" href="../benchmks/index.htm">Benchmarks</a>
<a class="menu" href="../subject_index.htm">Index</a>
<a class="menu" href="http://sourceforge.net/project/showfiles.php?group_id=151126">Download</a>
<a class="menu" href="https://github.com/ThomasMertes/seed7">GitHub</a>
<a class="menu" href="../build.htm">Build Seed7</a>
<a class="menu" href="../links.htm">Links</a>

<br />

<a class="head" href="index.htm"><big>Algorithms</big></a>
<a class="menu" href="sorting.htm">Sorting</a>
<a class="menu" href="search.htm">Searching</a>
<a class="menu" href="date.htm">Date&nbsp;&&nbsp;Time</a>
<a class="menu" href="string.htm">String</a>
<a class="menu" href="float.htm">Float</a>
<a class="menu" href="math.htm">Mathematics</a>
<a class="menu" href="msgdigest.htm">Message&nbsp;digest</a>
<a class="menu" href="graphic.htm">Graphics</a>
<a class="menu" href="file.htm">File</a>
<a class="menu" href="puzzles.htm">Puzzles</a>
<a class="menu" href="others.htm">Others</a>
</div>
<div class="content">
<div style="padding-right:20;">
<table width="100%" cellpadding="0" cellspacing="0">
<tr>
<td align="left" width="80">
<a class="head" href="index.htm"><big>Algorithms</big></a>
</td>
<td>
<table width="10">
</table>
</td>
<td align="left" width="60%">
<b><big>Date&nbsp;&&nbsp;Time</big></b></td>
<td align="right">
<table border="0" cellspacing="1" bgcolor="blue">
<tr bgcolor="gainsboro">
<td>&nbsp;<a class="navigation" href="../algorith/search.htm">previous</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../algorith/index.htm">up</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../algorith/string.htm">next</a>&nbsp;</td>
</tr>
</table>
</td>
</tr>
</table>
<p>
</p>

<div><a name="isLeapYear"><h3>Determine if a given year is a leap year</h3></a>
<p>
The function <tt><a class="func" href="../libraries/time.htm#isLeapYear(in_integer)">isLeapYear</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
It returns TRUE if the year is a leap year in the Gregorian calendar.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#boolean">boolean</a>: isLeapYear (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#integer">integer</a>: year) <span class="keywd">is</span>
  <span class="keywd">return</span> (year <a class="op" href="../libraries/integer.htm#(in_integer)rem(in_integer)">rem</a> 4 = 0 <span class="op">and</span> year <a class="op" href="../libraries/integer.htm#(in_integer)rem(in_integer)">rem</a> 100 &lt;> 0) <span class="op">or</span> year <a class="op" href="../libraries/integer.htm#(in_integer)rem(in_integer)">rem</a> 400 = 0;
</pre></div>

<div><a name="dayOfWeek"><h3>Compute the weekday</h3></a>
<p>
The function <tt><a class="func" href="../libraries/time.htm#dayOfWeek(in_time)">dayOfWeek</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
It delivers 1 for monday, 2 for tuesday, and so on up to 7 for sunday.
This definition of weekday is according to the ISO 8601 week date.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#integer">integer</a>: dayOfWeek (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#time">time</a>: aTime) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: weekday <span class="keywd">is</span> 0;
  <span class="keywd">local</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: year <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: month <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    year := aTime.year;
    month := aTime.month;
    <span class="keywd">if</span> month &lt;= 2 <span class="keywd">then</span>
      decr(year);
      month +:= 12;
    <span class="keywd">end if</span>;
    weekday := succ(pred(year + year <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 4 - year <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 100 + year <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 400 +
        (31 * (month - 2)) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 12 + aTime.day) <a class="op" href="../libraries/integer.htm#(in_integer)mod(in_integer)">mod</a> 7);
  <span class="keywd">end func</span>;
</pre></div>

<div><a name="dayOfYear"><h3>Compute the day of year</h3></a>
<p>
The function <tt><a class="func" href="../libraries/time.htm#dayOfYear(in_time)">dayOfYear</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
It delivers 1 for the 1. of january.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#integer">integer</a>: dayOfYear (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#time">time</a>: tim) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: dayOfYear <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    <span class="keywd">if</span> <a class="func" href="../libraries/time.htm#isLeapYear(in_integer)">isLeapYear</a>(tim.year) <span class="keywd">then</span>
      dayOfYear := [](0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335)[tim.month] + tim.day;
    <span class="keywd">else</span>
      dayOfYear := [](0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334)[tim.month] + tim.day;
    <span class="keywd">end if</span>;
  <span class="keywd">end func</span>;
</pre></div>

<div><a name="weekOfYear"><h3>Compute the week number of a year</h3></a>
<p>
The function <tt><a class="func" href="../libraries/time.htm#weekOfYear(in_var_integer,in_integer)">weekOfYear</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
According to ISO 8601: Week number 1 of every year contains the 4. of january.
Since 1st to 3rd of january might be in the previous week there can be also a week number 0.
This function computes week numbers from 0 to 53 for weeks belonging to the year of the given date.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#integer">integer</a>: weekOfYear (<span class="keywd">in var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: year, <a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#integer">integer</a>: dayOfYear) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: weekNumber <span class="keywd">is</span> 0;
  <span class="keywd">local</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: weekDayOfJan4 <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    year := pred(year);
    weekDayOfJan4 := succ(pred(year + year <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 4 - year <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 100 + year <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 400 + 32) <a class="op" href="../libraries/integer.htm#(in_integer)mod(in_integer)">mod</a> 7);
    weekNumber := (dayOfYear + weekDayOfJan4 - 5) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 7 + 1;
  <span class="keywd">end func</span>;

<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#integer">integer</a>: weekOfYear (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#time">time</a>: tim) <span class="keywd">is</span>
  <span class="keywd">return</span> weekOfYear(tim.year, <a class="func" href="../libraries/time.htm#dayOfYear(in_time)">dayOfYear</a>(tim));
</pre></div>

<div><a name="weekDateYear"><h3>Compute the year of the ISO 8601 week date</h3></a>
<p>
The function <tt><a class="func" href="../libraries/time.htm#weekDateYear(in_time)">weekDateYear</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
Compute the year of the ISO 8601 week date.
At the beginning and the end of an Gregorian calendar year there might be
days which belong to a week of the previous or next year.
For example 2005-01-01 is 2004-W53-6 and 2007-12-31 is 2008-W01-1.
The year returned by this function is in the range 'pred(tim.year)' to 'succ(tim.year)'.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#integer">integer</a>: weekDateYear (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#time">time</a>: tim) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: weekDateYear <span class="keywd">is</span> 0;
  <span class="keywd">local</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: weekNum <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    weekNum := <a class="func" href="../libraries/time.htm#weekOfYear(in_var_integer,in_integer)">weekOfYear</a>(tim.year, <a class="func" href="../libraries/time.htm#dayOfYear(in_time)">dayOfYear</a>(tim));
    <span class="keywd">if</span> weekNum &lt;= 0 <span class="keywd">then</span>
      weekDateYear := pred(tim.year);
    <span class="keywd">elsif</span> weekNum >= 53 <span class="op">and</span> tim.day >= 29 <span class="op">and</span>
        <a class="func" href="../libraries/time.htm#weekOfYear(in_var_integer,in_integer)">weekOfYear</a>(succ(tim.year), 31 - tim.day) = 1 <span class="keywd">then</span>
      weekDateYear := succ(tim.year);
    <span class="keywd">else</span>
      weekDateYear := tim.year;
    <span class="keywd">end if</span>;
  <span class="keywd">end func</span>;
</pre></div>

<div><a name="weekDateWeek"><h3>Compute the week of the ISO 8601 week date</h3></a>
<p>
The function <tt><a class="func" href="../libraries/time.htm#weekDateWeek(in_time)">weekDateWeek</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
Compute the week number of the ISO 8601 week date.
At the beginning and the end of an Gregorian calendar year there might be
days which belong to a week of the previous or next year.
For example 2005-01-01 is 2004-W53-6 and 2007-12-31 is 2008-W01-1.
The week number returned by this function is in the range 1 to 53.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#integer">integer</a>: weekDateWeek (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#time">time</a>: tim) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: weekNum <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    weekNum := <a class="func" href="../libraries/time.htm#weekOfYear(in_var_integer,in_integer)">weekOfYear</a>(tim.year, <a class="func" href="../libraries/time.htm#dayOfYear(in_time)">dayOfYear</a>(tim));
    <span class="keywd">if</span> weekNum &lt;= 0 <span class="keywd">then</span>
      weekNum := <a class="func" href="../libraries/time.htm#weekOfYear(in_var_integer,in_integer)">weekOfYear</a>(pred(tim.year), 366);
    <span class="keywd">elsif</span> weekNum >= 53 <span class="op">and</span> tim.day >= 29 <span class="op">and</span>
        <a class="func" href="../libraries/time.htm#weekOfYear(in_var_integer,in_integer)">weekOfYear</a>(succ(tim.year), 31 - tim.day) = 1 <span class="keywd">then</span>
      weekNum := 1;
    <span class="keywd">end if</span>;
  <span class="keywd">end func</span>;
</pre></div>

<div><a name="daysInMonth"><h3>Calculate the number of days in a month</h3></a>
<p>
The function <tt><a class="func" href="../libraries/time.htm#daysInMonth(in_time)">daysInMonth</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#integer">integer</a>: daysInMonth (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#integer">integer</a>: year, <a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#integer">integer</a>: month) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: leng <span class="keywd">is</span> 0;
  <span class="keywd">local</span>
    <span class="keywd">const</span> <a class="type" href="../manual/types.htm#set">set</a> <span class="type">of</span> <a class="type" href="../manual/types.htm#integer">integer</a>: monthsOfLength31 <span class="keywd">is</span> {1, 3, 5, 7, 8, 10, 12};
  <span class="keywd">begin</span>
    <span class="keywd">if</span> month <a class="op" href="../libraries/bitset.htm#(in_integer)in(in_bitset)">in</a> monthsOfLength31 <span class="keywd">then</span>
      leng := 31;
    <span class="keywd">else</span>
      <span class="keywd">if</span> month = 2 <span class="keywd">then</span>
        <span class="keywd">if</span> <a class="func" href="../libraries/time.htm#isLeapYear(in_integer)">isLeapYear</a>(year) <span class="keywd">then</span>
          leng := 29;
        <span class="keywd">else</span>
          leng := 28;
        <span class="keywd">end if</span>;
      <span class="keywd">else</span>
        leng := 30;
      <span class="keywd">end if</span>;
    <span class="keywd">end if</span>;
  <span class="keywd">end func</span>;
</pre></div>

<div><a name="julianDayNumber"><h3>Convert a time into a julian day number</h3></a>
<p>
The julian day number is the number of days that have elapsed since
January 1, 4713 BC in the proleptic Julian calendar.
The function <tt><a class="func" href="../libraries/time.htm#julianDayNumber(in_time)">julianDayNumber</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#integer">integer</a>: julianDayNumber (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#time">time</a>: aTime) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: julianDayNumber <span class="keywd">is</span> 0;
  <span class="keywd">local</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: year <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: month <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    year := aTime.year;
    month := aTime.month;
    <span class="keywd">if</span> month &lt;= 2 <span class="keywd">then</span>
      decr(year);
      month +:= 12;
    <span class="keywd">end if</span>;
    julianDayNumber := (1461 * (year + 4800)) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 4 +
                       (367 * (month - 2)) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 12 -
                       (3 * ((year + 4900) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 100)) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 4 +
                       aTime.day - 32075;
  <span class="keywd">end func</span>;
</pre></div>

<div><a name="julianDayNumToTime"><h3>Convert a julian day number into a time</h3></a>
<p>
The julian day number is the number of days that have elapsed since
January 1, 4713 BC in the proleptic Julian calendar.
The function <tt><a class="func" href="../libraries/time.htm#julianDayNumToTime(in_integer)">julianDayNumToTime</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#time">time</a>: julianDayNumToTime (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#integer">integer</a>: julianDayNumber) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#time">time</a>: aTime <span class="keywd">is</span> <a class="type" href="../manual/types.htm#time">time</a>.value;
  <span class="keywd">local</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: l <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: n <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: i <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: j <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    l := julianDayNumber + 68569;
    n := (4 * l) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 146097;
    l := l - (146097 * n + 3) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 4;
    i := (4000 * (l + 1)) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 1461001;
    l := l - (1461 * i) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 4 + 31;
    j := (80 * l) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 2447;
    aTime.day := l - (2447 * j) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 80;
    l := j <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 11;
    aTime.month := j + 2 - (12 * l);
    aTime.year := 100 * (n - 49) + i + l;
  <span class="keywd">end func</span>;
</pre></div>

<div><a name="easterDate"><h3>Compute the easter date for a given year</h3></a>
<p>
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#time">time</a>: easterDate (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#integer">integer</a>: year) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#time">time</a>: easterDate <span class="keywd">is</span> time.value;
  <span class="keywd">local</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: H1 <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: H2 <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: M <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: N <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: a <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: b <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: c <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: d <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: e <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: f <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    H1 := year <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 100;
    H2 := year <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 400;
     M := 15 + H1 - H2 - (8 * H1 + 13) <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 25;
     N := 4 + H1 - H2;

    <span class="comment"># Gauss formula:</span>
     a := year <a class="op" href="../libraries/integer.htm#(in_integer)mod(in_integer)">mod</a> 19;
     b := year <a class="op" href="../libraries/integer.htm#(in_integer)mod(in_integer)">mod</a> 4;
     c := year <a class="op" href="../libraries/integer.htm#(in_integer)mod(in_integer)">mod</a> 7;
     d := (19 * a + M) <a class="op" href="../libraries/integer.htm#(in_integer)mod(in_integer)">mod</a> 30;
     e := (2 * b + 4 * c + 6 * d + N) <a class="op" href="../libraries/integer.htm#(in_integer)mod(in_integer)">mod</a> 7;
     f := 22 + d + e;

    <span class="keywd">if</span> f = 57 <span class="keywd">then</span>
      f := 50;
    <span class="keywd">end if</span>;
    <span class="keywd">if</span> d = 28 <span class="op">and</span> e = 6 <span class="op">and</span> a > 10 <span class="keywd">then</span>
      f := 49;
    <span class="keywd">end if</span>;

    easterDate.year := year;
    <span class="keywd">if</span> f &lt;= 31 <span class="keywd">then</span>
      easterDate.month := 3;
    <span class="keywd">else</span>
      easterDate.month := 4;
      f -:= 31;
    <span class="keywd">end if</span>;
    easterDate.day := f;
  <span class="keywd">end func</span>;
</pre></div>

<div><a name="timestamp1970"><h3>Compute seconds since the Unix Epoch</h3></a>
<p>
Return a time expressed in seconds since the Unix Epoch.
The Unix Epoch (1970-01-01 00:00:00 UTC) corresponds to 0.
The function <tt><a class="func" href="../libraries/time.htm#timestamp1970(in_time)">timestamp1970</a></tt> is part of the <span class="stri">"<a class="lib" href="../libraries/time.htm">time.s7i</a>"</span> library.
</p><pre class="indent">
<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#integer">integer</a>: timestamp1970 (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#time">time</a>: aTime) <span class="keywd">is func</span>
  <span class="keywd">result</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: seconds <span class="keywd">is</span> 0;
  <span class="keywd">local</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: yearBefore <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    yearBefore := pred(aTime.year);
    seconds := (((yearBefore * 365 +
                  yearBefore <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 4 -
                  yearBefore <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 100 +
                  yearBefore <a class="op" href="../libraries/integer.htm#(in_integer)mdiv(in_integer)">mdiv</a> 400 -
               719162 +
               pred(<a class="func" href="../libraries/time.htm#dayOfYear(in_time)">dayOfYear</a>(aTime))) * 24 +
               aTime.hour) * 60 +
               aTime.minute) * 60 +
               aTime.second -
               aTime.timeZone * 60;
  <span class="keywd">end func</span>;
</pre></div>

<div><a name="calendar"><h3>Write a calendar</h3></a>
<p>
Write a calendar to standard output.
</p><pre class="indent">
$ <span class="keywd">include</span> <span class="stri">"<a class="lib" href="../lib/seed7_05.htm">seed7_05.s7i</a>"</span>;
  <span class="keywd">include</span> <span class="stri">"<a class="lib" href="../lib/time.htm">time.s7i</a>"</span>;

<span class="keywd">const</span> <a class="type" href="../manual/types.htm#func">func</a> <a class="type" href="../manual/types.htm#string">string</a>: center (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#string">string</a>: stri, <a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#integer">integer</a>: length) <span class="keywd">is</span>
  <span class="keywd">return</span> (<span class="stri">""</span> <a class="op" href="../libraries/string.htm#(in_string)lpad(in_integer)">lpad</a> (length - length(stri)) <a class="op" href="../libraries/integer.htm#(in_integer)div(in_integer)">div</a> 2 &lt;&amp; stri) <a class="op" href="../libraries/string.htm#(in_string)rpad(in_integer)">rpad</a> length;

<span class="keywd">const</span> <a class="type" href="../manual/types.htm#proc">proc</a>: printCalendar (<a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#integer">integer</a>: year, <a class="keywd_no_ul" href="../manual/params.htm#in_parameter">in</a> <a class="type" href="../manual/types.htm#integer">integer</a>: cols) <span class="keywd">is func</span>
  <span class="keywd">local</span>
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#time">time</a>: date <span class="keywd">is</span> time.value;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: dayOfWeek <span class="keywd">is</span> 0;
    <span class="keywd">const</span> <a class="type" href="../manual/types.htm#array">array</a> <a class="type" href="../manual/types.htm#string">string</a>: monthNames <span class="keywd">is</span> [] (<span class="stri">"January"</span>, <span class="stri">"February"</span>, <span class="stri">"March"</span>, <span class="stri">"April"</span>, <span class="stri">"May"</span>, <span class="stri">"June"</span>,
        <span class="stri">"July"</span>, <span class="stri">"August"</span>, <span class="stri">"September"</span>, <span class="stri">"October"</span>, <span class="stri">"November"</span>, <span class="stri">"December"</span>);
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#array">array</a> <a class="type" href="../manual/types.htm#array">array</a> <a class="type" href="../manual/types.htm#string">string</a>: monthTable <span class="keywd">is</span> 12 <a class="op" href="../libraries/array.htm#(in_integer)times(in_baseType)">times</a> 9 <a class="op" href="../libraries/array.htm#(in_integer)times(in_baseType)">times</a> <span class="stri">""</span>;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#string">string</a>: str <span class="keywd">is</span> <span class="stri">""</span>;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: month <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: position <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: row <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: column <span class="keywd">is</span> 0;
    <span class="keywd">var</span> <a class="type" href="../manual/types.htm#integer">integer</a>: line <span class="keywd">is</span> 0;
  <span class="keywd">begin</span>
    <span class="keywd">for</span> month <span class="keywd">range</span> 1 <span class="keywd">to</span> 12 <span class="keywd">do</span>
      monthTable[month][1] := <span class="stri">" "</span> &amp; center(monthNames[month], 20);
      monthTable[month][2] := <span class="stri">" Mo Tu We Th Fr Sa Su"</span>;
      date := <a class="func" href="../libraries/time.htm#date(in_integer,in_integer,in_integer)">date</a>(year, month, 1);
      dayOfWeek := <a class="func" href="../libraries/time.htm#dayOfWeek(in_time)">dayOfWeek</a>(date);
      <span class="keywd">for</span> position <span class="keywd">range</span> 1 <span class="keywd">to</span> 43 <span class="keywd">do</span>
        <span class="keywd">if</span> position >= dayOfWeek <span class="op">and</span> position - dayOfWeek &lt; <a class="func" href="../libraries/time.htm#daysInMonth(in_time)">daysInMonth</a>(date.year, date.month) <span class="keywd">then</span>
          str := succ(position - dayOfWeek) <a class="op" href="../libraries/enable_io.htm#(in_aType)lpad(in_integer)">lpad</a> 3;
        <span class="keywd">else</span>
          str := <span class="stri">""</span> <a class="op" href="../libraries/string.htm#(in_string)lpad(in_integer)">lpad</a> 3;
        <span class="keywd">end if</span>;
        monthTable[month][3 + pred(position) <a class="op" href="../libraries/integer.htm#(in_integer)div(in_integer)">div</a> 7] &:= str;
      <span class="keywd">end for</span>;
    <span class="keywd">end for</span>;
    writeln(center(str(year),cols * 24 + 4));
    writeln;
    <span class="keywd">for</span> row <span class="keywd">range</span> 1 <span class="keywd">to</span> succ(11 <a class="op" href="../libraries/integer.htm#(in_integer)div(in_integer)">div</a> cols) <span class="keywd">do</span>
      <span class="keywd">for</span> line <span class="keywd">range</span> 1 <span class="keywd">to</span> 9 <span class="keywd">do</span>
        <span class="keywd">for</span> column <span class="keywd">range</span> 1 <span class="keywd">to</span> cols <span class="keywd">do</span>
          <span class="keywd">if</span> pred(row) * cols + column &lt;= 12 <span class="keywd">then</span>
            write(<span class="stri">"   "</span> &amp; monthTable[pred(row) * cols + column][line]);
          <span class="keywd">end if</span>;
        <span class="keywd">end for</span>;
        writeln;
      <span class="keywd">end for</span>;
    <span class="keywd">end for</span>;
  <span class="keywd">end func</span>;

<span class="keywd">const</span> <a class="type" href="../manual/types.htm#proc">proc</a>: main <span class="keywd">is func</span>
  <span class="keywd">begin</span>
    printCalendar(1969, 3);
  <span class="keywd">end func</span>;
</pre></div>
<table width="100%" cellpadding="0" cellspacing="0">
<tr>
<td align="left" width="60%">
<b><big><hr \></big></b></td>
<td align="right">
<table border="0" cellspacing="1" bgcolor="blue">
<tr bgcolor="gainsboro">
<td>&nbsp;<a class="navigation" href="../algorith/search.htm">previous</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../algorith/index.htm">up</a>&nbsp;</td>
<td>&nbsp;<a class="navigation" href="../algorith/string.htm">next</a>&nbsp;</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</div>
  </body>
</html>
